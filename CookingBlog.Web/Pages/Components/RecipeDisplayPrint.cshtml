@model Models.RecipeData.RecipeDisplay
<style>
    .main-img {
        max-width: 700px;
        min-width: 375px;
    }

    .recipe-container {
        /* border: black 3px solid;
        padding: 15px;
        border-radius: 20px; */
        max-width: 900px;
    }

    .prep-container {
        padding-bottom: 5px;
    }

    .description {
        font-size: 1.1rem;
    }

    .recipe-steps {
        list-style: none;
        padding-left: 0px;
    }

        .recipe-steps li {
            margin-bottom: 3px;
        }

    .step-number {
        border-radius: 100%;
        padding: 2px 8px;
        margin-right: 3px;
        font-weight: 400;
        font-size: 0.9rem;
    }

    .tag-container {
        max-width: 500px;
        display: inline;
    }

    .tag {
        background: #81b742;
        color: white;
        border-radius: 15px;
        padding: 3px 7px;
    }

    .post-date {
        display: inline;
    }

    .story-container p {
        margin: 0px;
        padding: 3px;
    }

    .bio-container {
        background: #c4e39b;
        border: 1px solid black;
        border-radius: 15px;
        padding: 5px;
        margin-top: 4px;
    }

    .nutrition-info-container {
        border: 2px solid #81b742;
        border-radius: 5px;
        padding: 10px;
    }
</style>

<div class="container">
    <div>
        @if (Model.MainImgUrl != null)
        {
            <img class="main-img" src="@Model.MainImgUrl" />
        }
                
    </div>
    <div class="recipe-container">
        <div>
            <h1>@Model.Recipe.Name</h1>
            <div>
                <b>Recipe by: </b><span>@Model.Author.FirstName @Model.Author.LastName</span>
            </div>
            <div class="prep-container">
                <b>Prep: </b><span>@Model.Recipe.PrepTime minutes</span>
                <b>Cook: </b><span>@Model.Recipe.CookTime minutes</span>
                <b>Total: </b><span>@(Model.Recipe.PrepTime + Model.Recipe.CookTime) minutes</span>
                <b>Number of Servings: </b><span>@Model.Recipe.NumberServings</span>
            </div>
        </div>
        <div class="ingredients-container">
            @foreach (var ingredientGroup in Model.IngredientGroups)
            {
                if (Model.IngredientGroups.Count == 1)
                {
                    <h2>Ingredients</h2>
                }
                else
                {
                    <h2>Ingredients for @ingredientGroup.Key.Name</h2>
                }

                <ul>
                    @foreach (var ingredient in ingredientGroup.Value)
                    {
                        // TODO: account for plurals
                        if (ingredient.MeasurementAmountNumerator != null && ingredient.MeasurementAmountDenominator != null)
                        {
                            <li>
                                @if (@ingredient.MeasurementAmount != 0)
                                {
                                    <span>@ingredient.MeasurementAmount</span>
                                }
                                <span>@ingredient.MeasurementAmountNumerator/@ingredient.MeasurementAmountDenominator</span>

                                @ingredient.MeasurementUnitName @ingredient.IngredientName
                            </li>
                        }
                        else
                        {
                            <li>@ingredient.MeasurementAmount @ingredient.MeasurementUnitName @ingredient.IngredientName</li>
                        }

                    }
                </ul>
            }
        </div>
        @foreach (var step in Model.StepGroups)
        {
            if (Model.StepGroups.Count == 1)
            {
                <h2>Recipe Steps</h2>
            }
            else
            {
                <h2>Steps for @step.Key.Name</h2>
            }

            <ol class="recipe-steps">
                @{
                    for (var i = 0; i < step.Value.Count; i++)
                    {
                        var recipeStep = step.Value[@i];
                        <li><span class="step-number">@(i + 1).</span>@recipeStep.StepText</li>
                    }
                }
            </ol>
        }
        <div>
            <h2>Notes</h2>
            <ol>
                @foreach (var note in Model.Notes)
                {
                    <li>@note.NoteText</li>
                }
            </ol>
        </div>
        @if (Model.NutritionInfo != null)
        {
            <partial name="_NutritionFacts" model="@Model.NutritionInfo" />
        }
    </div>
</div>
